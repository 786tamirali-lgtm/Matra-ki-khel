<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§§‡§æ‡§Æ‡•Ä‡§∞ ‡§Ö‡§≤‡•Ä: ‡§Æ‡§π‡§æ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ - ‡§Ö‡§ï‡•ç‡§≤ ‡§ï‡•Ä ‡§ú‡•Ä‡§§</title>
    <style>
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            user-select: none; 
        }
        body {
            font-family: 'Nirmala UI', 'Segoe UI', 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            padding: 15px;
        }
        .game-card {
            background: #ffffff; 
            border-radius: 60px; 
            padding: 30px 20px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.5); 
            max-width: 650px; 
            width: 100%;
            border: 6px solid #fbbf24; 
            text-align: center;
        }
        h1 { 
            color: #0f172a; 
            font-size: 2rem; 
            margin-bottom: 10px;
            text-shadow: 2px 2px 0 #fde047;
        }
        .subtitle {
            background: #dc2626; 
            color: white; 
            padding: 8px 30px;
            border-radius: 40px; 
            display: inline-block; 
            font-weight: bold; 
            margin-bottom: 25px;
            border: 2px solid #fde047;
            font-size: 1.2rem;
        }
        .button-grid { 
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center; 
            gap: 12px; 
            margin-bottom: 25px; 
        }
        .cat-btn {
            padding: 14px 22px; 
            font-size: 1.2rem; 
            font-weight: bold; 
            border: none;
            border-radius: 40px; 
            cursor: pointer; 
            color: white; 
            transition: 0.1s;
            box-shadow: 0 6px 0 rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.3);
        }
        .cat-btn:active { 
            transform: translateY(4px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.3);
        }
        .swar-btn { background: #e67e22; }
        .vyanjan-btn { background: #27ae60; }
        .matra-btn { background: #9b59b6; }
        .english-btn { background: #e74c3c; }

        .display-box {
            width: 240px;
            height: 240px;
            margin: 15px auto;
            border: 12px dashed #fbbf24;
            background: #fffbeb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 120px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            color: transparent;
            transition: all 0.2s;
            box-shadow: 0 15px 25px rgba(0,0,0,0.2);
        }
        .display-box.revealed {
            border-style: solid;
            border-color: #27ae60;
            color: #0f172a;
            background: white;
        }
        .instruction-box {
            background: #2d3c4b;
            color: white;
            padding: 18px;
            border-radius: 40px;
            font-size: 1.6rem;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            border: 4px solid #fbbf24;
            font-weight: bold;
        }
        .confirm-panel { 
            display: none; 
            margin-top: 15px;
            background: #f1f5f9;
            padding: 20px;
            border-radius: 40px;
            border: 4px solid #3b82f6;
        }
        .question-text {
            font-size: 1.8rem;
            font-weight: bold;
            color: #0f172a;
            margin-bottom: 15px;
        }
        .ans-btn {
            padding: 12px 40px;
            font-size: 1.8rem;
            border: none;
            border-radius: 40px;
            cursor: pointer;
            color: white;
            margin: 5px 10px;
            box-shadow: 0 6px 0 rgba(0,0,0,0.2);
            transition: 0.1s;
            font-weight: bold;
        }
        .ans-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.2);
        }
        .yes { background: #2ecc71; }
        .no { background: #ef4444; }
        .footer-note {
            margin-top: 20px;
            color: #475569;
            font-size: 1rem;
            font-weight: bold;
        }
        @media (max-width: 500px) {
            h1 { font-size: 1.6rem; }
            .display-box { width: 200px; height: 200px; font-size: 100px; }
            .instruction-box { font-size: 1.3rem; }
        }
    </style>
</head>
<body>

<div class="game-card">
    <h1>üìö ‡§§‡§æ‡§Æ‡•Ä‡§∞ ‡§Ö‡§≤‡•Ä: ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ú‡•ç‡§û‡§æ‡§®</h1>
    <div class="subtitle">üéØ ‡§Ö‡§ï‡•ç‡§≤ ‡§ï‡•Ä ‡§ú‡•Ä‡§§ - ‡§∏‡•ã‡§ö‡•ã ‡§î‡§∞ ‡§™‡§π‡§ö‡§æ‡§®‡•ã üéØ</div>
    
    <div class="button-grid">
        <button class="cat-btn swar-btn" onclick="startGame('swar')">üîä ‡§∏‡•ç‡§µ‡§∞ (‡§Ö-‡§î)</button>
        <button class="cat-btn vyanjan-btn" onclick="startGame('vyanjan')">üîä ‡§µ‡•ç‡§Ø‡§Ç‡§ú‡§® (‡§ï-‡§ú‡•ç‡§û)</button>
        <button class="cat-btn matra-btn" onclick="startGame('matra')">üîä ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ (‡§ï‡§æ-‡§ï‡•Ä)</button>
        <button class="cat-btn english-btn" onclick="startGame('english')">üî† English (A-Z)</button>
    </div>
    
    <div id="displayBox" class="display-box" onclick="revealLetter()">?</div>
    <div id="instruction" class="instruction-box">‚ú® ‡§¨‡§ü‡§® ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§®‡•á‡§Ç ‚ú®</div>

    <div id="confirmPanel" class="confirm-panel">
        <div id="questionText" class="question-text">ü§î ‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§∏‡§π‡•Ä ‡§π‡•à?</div>
        <div>
            <button class="ans-btn yes" onclick="handleAnswer(true)">‡§π‡§æ‡§Å ‚úÖ</button>
            <button class="ans-btn no" onclick="handleAnswer(false)">‡§®‡§æ ‚ùå</button>
        </div>
    </div>
    
    <div class="footer-note">
        ‚≠ê ‡§™‡§π‡§≤‡•á ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§®‡•ã ‚Üí ‡§∏‡•ã‡§ö‡•ã ‚Üí ‡§´‡§ø‡§∞ ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•ã ‚≠ê
    </div>
</div>

<script>
// Complete letter collections
const letterData = {
    swar: ['‡§Ö', '‡§Ü', '‡§á', '‡§à', '‡§â', '‡§ä', '‡§è', '‡§ê', '‡§ì', '‡§î'],
    vyanjan: ['‡§ï', '‡§ñ', '‡§ó', '‡§ò', '‡§ô', '‡§ö', '‡§õ', '‡§ú', '‡§ù', '‡§û', 
              '‡§ü', '‡§†', '‡§°', '‡§¢', '‡§£', '‡§§', '‡§•', '‡§¶', '‡§ß', '‡§®', 
              '‡§™', '‡§´', '‡§¨', '‡§≠', '‡§Æ', '‡§Ø', '‡§∞', '‡§≤', '‡§µ', '‡§∂', 
              '‡§∑', '‡§∏', '‡§π', '‡§ï‡•ç‡§∑', '‡§§‡•ç‡§∞', '‡§ú‡•ç‡§û'],
    matra: ['‡§æ', '‡§ø', '‡•Ä', '‡•Å', '‡•Ç', '‡•á', '‡•à', '‡•ã', '‡•å'],
    english: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 
              'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']
};

// Matra sounds combined with '‡§ï' for proper pronunciation
const matraSounds = {
    '‡§æ': '‡§ï‡§æ', '‡§ø': '‡§ï‡§ø', '‡•Ä': '‡§ï‡•Ä', '‡•Å': '‡§ï‡•Å', '‡•Ç': '‡§ï‡•Ç',
    '‡•á': '‡§ï‡•á', '‡•à': '‡§ï‡•à', '‡•ã': '‡§ï‡•ã', '‡•å': '‡§ï‡•å'
};

// Game state
let currentLetter = '';
let currentCategory = '';
let canReveal = false;
let isAnswered = false;
let voiceTimer = null;

// DOM elements
const box = document.getElementById('displayBox');
const instructionEl = document.getElementById('instruction');
const confirmPanel = document.getElementById('confirmPanel');
const questionEl = document.getElementById('questionText');

// Improved speak function
function speakText(message, lang = 'hi-IN') {
    if (!window.speechSynthesis) return;
    
    window.speechSynthesis.cancel();
    
    const utterance = new SpeechSynthesisUtterance(message);
    utterance.lang = lang;
    utterance.rate = 0.9;
    utterance.pitch = 1.1;
    
    // Try to set appropriate voice
    const voices = window.speechSynthesis.getVoices();
    if (lang === 'hi-IN') {
        const hindiVoice = voices.find(v => v.lang.includes('hi'));
        if (hindiVoice) utterance.voice = hindiVoice;
    } else {
        const englishVoice = voices.find(v => v.lang.includes('en'));
        if (englishVoice) utterance.voice = englishVoice;
    }
    
    window.speechSynthesis.speak(utterance);
}

// Start game function
function startGame(category) {
    // Clear previous timer
    if (voiceTimer) {
        clearTimeout(voiceTimer);
        voiceTimer = null;
    }
    
    currentCategory = category;
    const letters = letterData[category];
    const randomIndex = Math.floor(Math.random() * letters.length);
    currentLetter = letters[randomIndex];
    
    // Reset display
    box.innerText = currentLetter;
    box.style.color = 'transparent';
    box.style.borderStyle = 'dashed';
    box.style.borderColor = '#fbbf24';
    box.classList.remove('revealed');
    
    // Hide confirm panel
    confirmPanel.style.display = 'none';
    
    // Reset state
    canReveal = false;
    isAnswered = false;
    
    // Show instruction
    instructionEl.innerText = 'üîä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§®‡•ã ‡§î‡§∞ ‡§∏‡•ã‡§ö‡•ã... üîä';
    
    // Prepare and speak the letter
    let message = '';
    let lang = 'hi-IN';
    
    switch(category) {
        case 'swar':
            message = `‡§∏‡•ç‡§µ‡§∞ ‡§∏‡•Å‡§®‡•ã: ${currentLetter}`;
            break;
        case 'vyanjan':
            message = `‡§µ‡•ç‡§Ø‡§Ç‡§ú‡§® ‡§∏‡•Å‡§®‡•ã: ${currentLetter}`;
            break;
        case 'matra':
            // For matra, use combined form
            message = `‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§∏‡•Å‡§®‡•ã: ${matraSounds[currentLetter] || currentLetter}`;
            break;
        case 'english':
            message = `English letter: ${currentLetter}`;
            lang = 'en-US';
            break;
    }
    
    speakText(message, lang);
    
    // After 2.5 seconds, allow clicking
    voiceTimer = setTimeout(() => {
        if (!isAnswered) {
            instructionEl.innerText = 'üëÜ ‡§Ö‡§¨ ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•ã üëÜ';
            canReveal = true;
        }
        voiceTimer = null;
    }, 2500);
}

// Reveal letter function
function revealLetter() {
    if (!canReveal) {
        speakText('‡§™‡§π‡§≤‡•á ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§®‡•ã');
        instructionEl.innerText = '‚è≥ ‡§™‡§π‡§≤‡•á ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§®‡•ã, ‡§´‡§ø‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•ã ‚è≥';
        return;
    }
    
    // Reveal the letter
    box.style.color = '#0f172a';
    box.style.borderStyle = 'solid';
    box.style.borderColor = '#27ae60';
    box.classList.add('revealed');
    
    // Update question text
    let displayChar = currentLetter;
    if (currentCategory === 'matra') {
        displayChar = `${currentLetter} (${matraSounds[currentLetter]})`;
    }
    questionEl.innerText = `ü§î ‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π "${displayChar}" ‡§π‡•à?`;
    
    // Show confirmation panel
    confirmPanel.style.display = 'block';
    instructionEl.innerText = '‚ùì ‡§π‡§æ‡§Å ‡§Ø‡§æ ‡§®‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç ‚ùì';
    
    // Disable further reveals
    canReveal = false;
    
    // Clear timer
    if (voiceTimer) {
        clearTimeout(voiceTimer);
        voiceTimer = null;
    }
    
    // Ask the question
    speakText('‡§ï‡•ç‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§®‡•á ‡§Æ‡•Å‡§ù‡•á ‡§π‡•Ä ‡§¶‡•á‡§ñ‡§æ?');
}

// Handle answer function
function handleAnswer(isYes) {
    if (isAnswered) return;
    isAnswered = true;
    
    if (isYes) {
        speakText('‡§∂‡§æ‡§¨‡§æ‡§∂! ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡•á!');
        instructionEl.innerText = 'üèÜ ‡§∏‡§π‡•Ä! ‡§Ö‡§ï‡•ç‡§≤ ‡§ï‡•Ä ‡§ú‡•Ä‡§§! üèÜ';
        box.style.backgroundColor = '#d1fae5';
    } else {
        speakText('‡§ï‡•ã‡§à ‡§¨‡§æ‡§§ ‡§®‡§π‡•Ä‡§Ç, ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•ã');
        instructionEl.innerText = 'üîÑ ‡§Ö‡§ó‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§î‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∏‡•á ‡§∏‡•Å‡§®‡•ã üîÑ';
        box.style.backgroundColor = '#fee2e2';
    }
    
    // Hide confirm panel
    confirmPanel.style.display = 'none';
    
    // Reset background
    setTimeout(() => {
        box.style.backgroundColor = '';
    }, 500);
}

// Initialize on load
window.addEventListener('load', function() {
    box.innerText = '?';
    box.style.color = 'transparent';
    instructionEl.innerText = '‚ú® ‡§¨‡§ü‡§® ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§®‡•á‡§Ç ‚ú®';
    confirmPanel.style.display = 'none';
    
    // Pre-load voices
    if (window.speechSynthesis) {
        window.speechSynthesis.getVoices();
    }
});
</script>

</body>
</html>
